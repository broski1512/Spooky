<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Will You Be My Valentine?</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

   
<style>

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Poppins',sans-serif;
}

body{
height:100vh;
display:flex;
justify-content:center;
align-items:center;
background:linear-gradient(135deg,#ffd1dc,#ffe6eb);
overflow:hidden;
}

/* CARD */

.card{
width:460px;
max-width:92%;
background:white;
border-radius:28px;
padding:55px 35px;
text-align:center;
box-shadow:0 25px 70px rgba(0,0,0,0.12);
position:relative;
}

/* EMOJI */

.emoji{
font-size:70px;
margin-bottom:15px;
}

h1{
font-size:28px;
margin-bottom:45px;
}

/* BUTTON LAYOUT */

.buttons{
display:flex;
justify-content:center;
align-items:center;
gap:100px;
position:relative;
height:90px;
}

/* BUTTON STYLE */

button{
padding:16px 42px;
border-radius:999px;
font-size:18px;
cursor:pointer;
transition:.25s;
}

/* YES */

#yes{
background:#e94b78;
color:white;
border:none;
box-shadow:0 8px 18px rgba(0,0,0,.15);
}

#yes:hover{
transform:scale(1.15);
}

/* NO */

#no{
background:#f3f3f3;
border:2px solid #d6d6d6;
position:absolute;
}

/* TEXT */

.note{
margin-top:25px;
font-size:13px;
color:#777;
}

.shareBox{
margin-top:25px;
}

input{
width:100%;
padding:12px;
border-radius:10px;
border:1px solid #ddd;
}

</style>
</head>

<body>

<div class="card">

<div class="emoji">üê±üíó</div>

<h1 id="title"></h1>

<div class="buttons">
<button id="yes">Yes</button>
<button id="no">No</button>
</div>

<div class="note">‚ÄúNo‚Äù seems a bit shy üòâ</div>

<div class="shareBox">
<p style="margin-bottom:8px;">Share this link:</p>
<input id="shareLink" readonly>
</div>

</div>

<script>

/* NAME */

const params = new URLSearchParams(window.location.search);
let name = params.get('name') || "Angela";
name = name.charAt(0).toUpperCase() + name.slice(1);

document.getElementById("title").innerText =
`${name}, will you be my valentine?`;

document.getElementById("shareLink").value =
`${window.location.origin}${window.location.pathname}?name=${encodeURIComponent(name)}`;


   
/* =================================
   CONTROLLED ESCAPE BUTTON
================================= */

const noBtn = document.getElementById("no");
const card = document.querySelector(".card");

let directionIndex = 0;

/*
Order:
0 ‚Üí LEFT
1 ‚Üí UP
2 ‚Üí RIGHT
3 ‚Üí DOWN
*/

function moveNoButton(){

const stepX = 100;
const stepY = 50;

const btnRect = noBtn.getBoundingClientRect();
const cardRect = card.getBoundingClientRect();

/* Current position relative to card */

let left = btnRect.left - cardRect.left;
let top  = btnRect.top  - cardRect.top;

if(directionIndex === 0){
left -= stepX;
if(left < 20){
left = 20;
directionIndex = 1;
}
}

else if(directionIndex === 1){
top -= stepY;
if(top < 120){
top = 120;
directionIndex = 2;
}
}

else if(directionIndex === 2){
left += stepX;
if(left > cardRect.width - btnRect.width - 20){
left = cardRect.width - btnRect.width - 20;
directionIndex = 3;
}
}

else if(directionIndex === 3){
top += stepY;
if(top > 220){
top = 220;
directionIndex = 0;
}
}

noBtn.style.left = left + "px";
noBtn.style.top  = top + "px";
}

/* Cursor detection */

document.addEventListener("mousemove",(e)=>{

const rect = noBtn.getBoundingClientRect();

const centerX = rect.left + rect.width/2;
const centerY = rect.top + rect.height/2;

const distance = Math.hypot(e.clientX-centerX,e.clientY-centerY);

if(distance < 50){
moveNoButton();
}

});

/* MOBILE */

noBtn.addEventListener("touchstart",(e)=>{
e.preventDefault();
moveNoButton();
});


/* YES */

document.getElementById("yes").onclick = ()=>{

confetti({
particleCount:220,
spread:130,
origin:{y:.6}
});

document.querySelector(".card").innerHTML = `
<div style="font-size:80px">‚ù§Ô∏è</div>
<h1>Yay!! ${name} said YES!</h1>
`;

};

</script>

</body>
</html>
