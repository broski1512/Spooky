<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Valentine</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Poppins',sans-serif;
}

/* Background */

body{
height:100vh;
display:flex;
justify-content:center;
align-items:center;
background:#f3cfd8;
overflow:hidden;
transition:.6s;
}

/* Blur after YES */

body.success{
filter:blur(6px) brightness(.9);
}

/* Card */

.card{
width:720px;
max-width:92%;
background:#efefef;
border-radius:40px;
padding:70px 40px;
text-align:center;
position:relative;
z-index:2;
}

/* Emoji */

.emoji{
font-size:80px;
margin-bottom:20px;
}

/* Heading */

h1{
font-size:42px;
font-weight:700;
line-height:1.25;
margin-bottom:60px;
}

/* Buttons */

.buttons{
display:flex;
justify-content:center;
align-items:center;
gap:100px;
position:relative;
height:170px;
}

button{
padding:22px 60px;
font-size:26px;
border-radius:60px;
border:none;
cursor:pointer;
transition:.35s;
}

/* YES */

#yes{
background:#e24a78;
color:white;
transform-origin:center;
box-shadow:0 10px 25px rgba(0,0,0,.18);
}

/* NO */

#no{
background:#e5e5e5;
border:2px solid #bdbdbd;
position:absolute;
left:50%;
transform:translateX(-50%);
}

/* Note */

.note{
color:#777;
font-size:18px;
margin-bottom:35px;
}

/* Share */

.shareLabel{
font-size:20px;
margin-bottom:10px;
}

input{
width:100%;
padding:16px;
border-radius:14px;
border:2px solid #d1d1d1;
font-size:16px;
background:white;
}

/* Floating hearts */

.heart{
position:fixed;
font-size:22px;
animation:floatUp 4s linear forwards;
z-index:1;
}

@keyframes floatUp{
from{
transform:translateY(0);
opacity:1;
}
to{
transform:translateY(-600px);
opacity:0;
}
}

/* Success popup */

.successCard{
position:fixed;
top:50%;
left:50%;
transform:translate(-50%,-50%) scale(.7);
background:white;
padding:80px;
border-radius:40px;
text-align:center;
z-index:5;
animation:pop .5s forwards;
}

@keyframes pop{
to{
transform:translate(-50%,-50%) scale(1);
}
}

</style>
</head>

<body>

<div class="card">

<div class="emoji">üê± üíó</div>

<h1 id="title"></h1>

<div class="buttons">
<button id="yes">Yes</button>
<button id="no">No</button>
</div>

<div class="note">‚ÄúNo‚Äù seems a bit shy üòâ</div>

<div class="shareLabel">Share this link:</div>
<input id="shareLink" readonly>

</div>

<script>

/* PERSONALIZED NAME */

const params = new URLSearchParams(window.location.search);
let name = params.get('name') || "Angela";
name = name.charAt(0).toUpperCase() + name.slice(1);

document.getElementById("title").innerText =
`${name}, will you be my valentine?`;

/* SHARE LINK */

document.getElementById("shareLink").value =
`${window.location.origin}${window.location.pathname}?name=${encodeURIComponent(name)}`;


/* ================================
   CIRCULAR RUNAWAY BUTTON
================================ */

const noBtn = document.getElementById("no");
const card = document.querySelector(".card");
const yesBtn = document.getElementById("yes");

let running = false;
let angle = 0;
let radius = 90;
let yesScale = 1;

function animateCircle(){

const cardRect = card.getBoundingClientRect();
const btnRect = noBtn.getBoundingClientRect();

const centerX = cardRect.width/2 - btnRect.width/2;
const centerY = cardRect.height/2 + 20;

angle += 0.06;
radius += 0.015; // panic expansion

const x = centerX + radius * Math.cos(angle);
const y = centerY + radius * Math.sin(angle);

const maxX = cardRect.width - btnRect.width - 20;
const maxY = cardRect.height - btnRect.height - 20;

noBtn.style.left = Math.max(20, Math.min(x, maxX)) + "px";
noBtn.style.top  = Math.max(20, Math.min(y, maxY)) + "px";

/* YES grows each chase */
yesScale += 0.0025;
yesBtn.style.transform = `scale(${yesScale})`;

requestAnimationFrame(animateCircle);
}

document.addEventListener("mousemove",(e)=>{

if(running) return;

const rect = noBtn.getBoundingClientRect();

const centerX = rect.left + rect.width/2;
const centerY = rect.top + rect.height/2;

const distance = Math.hypot(e.clientX-centerX,e.clientY-centerY);

if(distance < 50){
running = true;
animateCircle();
}

});

/* MOBILE ESCAPE */

noBtn.addEventListener("touchstart",(e)=>{
e.preventDefault();
if(!running){
running = true;
animateCircle();
}
});


/* ================================
   YES CLICK EXPERIENCE
================================ */

yesBtn.onclick = ()=>{

/* Blur background */
document.body.classList.add("success");

/* Confetti blast */
confetti({
particleCount:250,
spread:160,
origin:{y:.6}
});

/* Side cannons */

const duration = 3500;
const end = Date.now()+duration;

(function frame(){
confetti({particleCount:6,angle:60,spread:70,origin:{x:0}});
confetti({particleCount:6,angle:120,spread:70,origin:{x:1}});
if(Date.now()<end) requestAnimationFrame(frame);
})();

/* Floating hearts */

for(let i=0;i<25;i++){
setTimeout(()=>{

const heart=document.createElement("div");
heart.className="heart";
heart.innerHTML="üíó";
heart.style.left=Math.random()*100+"vw";
heart.style.bottom="-20px";

document.body.appendChild(heart);

},i*120);
}

/* Success popup */

const popup=document.createElement("div");
popup.className="successCard";
popup.innerHTML=`
<div style="font-size:90px">‚ù§Ô∏è</div>
<h1>Yay!! ${name} said YES!</h1>
`;

document.body.appendChild(popup);

};

</script>

</body>
</html>
